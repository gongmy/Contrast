@{
    ViewBag.Title = "审批流程";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
    List<Entity.Contrast_WorkflowMainDetail> list = ViewBag.List;
}
@section head{
    <link href="@Url.Content("/Content/timeline.css")" rel="stylesheet" type="text/css" />
}
@model Entity.Contrast_WorkflowMain
<div class="Div_Title">
    审批管理 -> 审批流程
</div>
<div>
    @using (Ajax.BeginForm("Add", "Contrast_WorkflowMain", null, new AjaxOptions() { UpdateTargetId = "alert" }))
    {
        <div>
            <input type="button" value="返回" onclick="window.location.href='@ViewBag.BackUrl" class="input_button" />
        </div>
        <br />
        <table class="Tab_info" cellpadding="0" cellspacing="0">
            <tr>
                <td style="width: 120px">
                    公司名称：
                </td>
                <td style="width: 220px">
                    @Model.Contrast_UserInfo.Name @Html.HiddenFor(a => a.ID)
                </td>
                <td style="width: 120px; text-align: right; padding-right: 5px; font-weight: bold;">
                    组织机构：
                </td>
                <td style="width: 220px">
                    @Model.Contrast_Organization.Name
                </td>
            </tr>
            <tr>
                <td style="width: 120px">
                    需求资金(万元)：
                </td>
                <td style="width: 220px">
                    @Model.Contrast_UserInfo.DemandMonth
                </td>
                <td style="width: 120px; text-align: right; padding-right: 5px; font-weight: bold;">
                    提供资金(万元)：
                </td>
                <td style="width: 220px">
                    @Model.Contrast_Organization.ProvideMoney
                </td>
            </tr>
            <tr>
                <td style="width: 120px">
                    需求周期(月)：
                </td>
                <td style="width: 220px">
                    @Model.Contrast_UserInfo.DemandMoney
                </td>
                <td style="width: 120px; text-align: right; padding-right: 5px; font-weight: bold;">
                    提供周期(月)：
                </td>
                <td style="width: 220px">
                    @Model.Contrast_Organization.BeginMonth - @Model.Contrast_Organization.EndMonth
                </td>
            </tr>
            <tr>
                <td style="width: 120px">
                    可承受利息：
                </td>
                <td style="width: 220px">
                    @Model.Contrast_UserInfo.AcceptInterest%
                </td>
                <td style="width: 120px; text-align: right; padding-right: 5px; font-weight: bold;">
                    年利息：
                </td>
                <td style="width: 220px">
                    @Model.Contrast_Organization.DemandInterest%
                </td>
            </tr>
            <tr>
                <td style="width: 120px">
                    备注：
                </td>
                <td colspan="3">
                    <textarea style="width: 75%;" rows="8" name="comment" id="comment"></textarea>
                </td>
            </tr>
        </table>
        
        <div class="content">
            <article>
                @{
                bool isStop = false;
        
                    }
                @foreach (var item in list)
                {
                    string color = null;
                    string status_str = "";
                    if (item.Status.HasValue)
                    {
                        if (item.Status.Value == 1)
                        {
                            //通过
                            color = "green";
                            status_str = "通过";
                        }
                        else
                        {
                            //未通过
                            color = "red";
                            status_str = "未通过";
                        }
                    }
                    else
                    {
                        if (isStop == false)
                        {   //审核中
                            color = "yellow";
                            status_str = "审核中";
                        }
                        else
                        {
                            //未进行
                            color = "blue";
                            status_str = "未审核";
                        }
                    }
                    <section>
                        <span class="point-time point-@color"></span>
                        <time datetime="2013-03">
                            <span>@item.CheckTime</span>
                        </time>
                        <aside>
                            <p class="things">@item.Title</p>
                            <p class="brief"><span class="text-@color" style="width:45px">@status_str</span><span class="text-black" style="margin-left:10px;color:Black">项目立项</span></p>
                        </aside>
                    </section>
                    if (item.Status.HasValue == false)
                    {
                        isStop = true;
                    }
                }
            </article>
        </div>

        <div>
            <input type="submit" id="sub_button" class="input_button" value="添加" />
            <input type="button" value="返回" onclick="window.location.href='@ViewBag.BackUrl" class="input_button" />
        </div>
    }
</div>
